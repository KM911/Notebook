## hello world

这是一个C语言的hello world程序.
```c
#include<stdio.h>
int main(){
    printf("hello wordl");
    return 0;
}
```

你知道为什么`main`函数要返回一个`int`类型的值吗?或许我可以换一个格式

```c
#include<stdio.h>
#include<stdlib.h>
int main(){
    printf("hello wordl");
	return EXIT_SUCCESS;
}
```
EXIT_SUCCESS是stdlib.h中定义的一个宏,其值未0,表示的含义如同字面意思一样,程序正常退出.在一些情况下,你可以看到这样的提示信息.

program exit with code 0 ... 

这样的目的是通过该返回值来判断程序是否运行错误,其实是C语言中错误处理的一种形式,例如很多函数返回负数来表示函数执行失败.

有成功退出就有因为错误导致的退出,你不妨自己去试试看,看看错误退出的值是多少?
![[Pasted image 20230920210641.webp]]

如果有人开发过单片机就知道,在单片机里,我们不写`int`,(其实也可以写),我们一般写void,这是为什么? 

实际上,如果在普通的电脑上写一个 `void main` 的C程序,该程序还是可以通过编译并且正常运行的.

单片机里没有操作系统,我们的C程序直接控制整个硬件.单片机里程序就不会退出,对的你没有听错,程序不会退出,就一直是一个程序一直在运行,一个非常大的while(1).

因为没有操作系统并且一直在运行,单片机里的sleep函数是通过固定的CPU频率进行固定的运算操作实现的.

这是一个流水灯的代码.

```c
#include <REGX52.H>
 
void sleep(unsigned int xms);  //@12.000MHz
void sleep(unsigned int xms)   //@12.000MHz
{
  unsigned char i, j;
  while(xms)
  {
    i = 2;
    j = 239;
    do
    {
      while (--j);
    } while (--i);
    xms--;
  }
}
void main(void)
{
  while(1)
  {
    P2=0xFE;//1111 1110
    sleep(1000);
    P2=0xFD;//1111 1101
    sleep(900);
    P2=0xFB;//1111 1011
    sleep(800);
    P2=0xF7;//1111 0111
    sleep(700);
    P2=0xEF;//1110 1111
    sleep(600);
    P2=0xDF;//1101 1111
    sleep(500);
    P2=0xBF;//1011 1111
    sleep(300);
    P2=0x7F;//0111 1111
    sleep(100);
  }
}
```

包括还有操作系统的源码,你猜猜看我们的linux的main函数返回类型是什么?

我们直接去看源码就好了. 我直到大三了才可以开始自己造轮子. 
## 操作系统是必不可少的吗

看完了上面的例子,我们就可以知道,也可以不要操作系统.

首先,单片机的结构比较简单,硬件都是固定规格参数的,没有加上性能比较"弱",如果再加上一个操作系统可能就支持不了. 