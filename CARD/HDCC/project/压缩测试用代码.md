---
file-created: 2023 12 05
last-modified: 2023 12 05
---
### 测试gzip

br 同理，只需要导入 brotli ，并且修改一些参数就可以了。
需要注意的是 br 有11个等级。

```python
import json
import time
import gzip
from pyparsing import cpp_style_comment
# 定义我们需要压缩的数据 100,000,000,000
# 读取assets目录下所有文件
# 读取文件

with open("readyToZip.js", 'rb') as fp:
    data = fp.read()


def measure_cpu_usage(func, *args, **kwargs):
    start_time = time.time()

    func(*args, **kwargs)  # 运行函数

    end_time = time.time()

    elapsed_time = end_time - start_time

    return elapsed_time


length = []

# 测量 gzip.compress 的 CPU 使用率
for i in range(1, 10):
    size = gzip.compress(data, compresslevel=i)
    length.append(len(size))

compress_list = []

for i in range(1, 10):
    afterFileInfo = {}
    gzip_time = measure_cpu_usage(
        gzip.compress, data, compresslevel=i)
    afterFileInfo['压缩等级'] = i
    afterFileInfo['压缩耗时'] = gzip_time
    afterFileInfo['压缩前大小'] = len(data)
    afterFileInfo['压缩后大小'] = length[i-1]
    compress_list.append(afterFileInfo)
# 将compress_list写入json文件，保留中文
with open('compress_list.json', 'w', encoding='utf-8') as f:
    json.dump(compress_list, f, ensure_ascii=False)

```

